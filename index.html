<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<meta http-equiv="Cache-control" content="no-cache">
<link href="styles.css" type="text/css" rel="stylesheet" />
<title>Nivsite</title>
</head>
<body>

<div class="garden">
  <div class="ball"></div>
</div>

<pre class="output"></pre>

<div id="home" class="home_container">
	<div id="intro" class="fadein">
	
		<div class="h1">
			<div id="niven" class="names">NIVEN</div> <div id="francis" class="names">FRANCIS</div>
	
			<div id="enter" class="enter" onclick="fadeout_main()">
				<span style='border:5px #D3D3D3 solid;'>&nbspENTER&nbsp</span>
			</div>
		
		</div>
	
	</div>
	
<div class="fullscreen-bg">
	    <video loop muted autoplay class="fullscreen-bg__video">
	        <source src="media/background.mp4" type="video/mp4">
	    </video>
	</div>
</div>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>
$(document).ready(function() {
	$('#enter').css({
        left: -0.1 * 850 + window.innerWidth/2 - 55,
        top: -0.1 * 400 + window.innerHeight/2 + 300
    });
    $('#niven').css({
        left: -0.02 * 850 + window.innerWidth/2 - 330,
        top: -0.02 * 400 + window.innerHeight/2 - 350
    });
    $('#francis').css({
        left: -0.04 * 850 + window.innerWidth/2 - 470,
        top: -0.04 * 400 + window.innerHeight/2 - 100
    });
    
    if(detectmob()) {
	    if (window.DeviceOrientationEvent) {
	    	var ball   = document.querySelector('.ball');
	    	var garden = document.querySelector('.garden');
	    	var output = document.querySelector('.output');

	    	var maxX = garden.clientWidth  - ball.clientWidth;
	    	var maxY = garden.clientHeight - ball.clientHeight;

	    	function handleOrientation(event) {
	    	  var x = event.beta;  // In degree in the range [-180,180]
	    	  var y = event.gamma; // In degree in the range [-90,90]

	    	  output.innerHTML  = "beta : " + x + "\n";
	    	  output.innerHTML += "gamma: " + y + "\n";

	    	  // Because we don't want to have the device upside down
	    	  // We constrain the x value to the range [-90,90]
	    	  if (x >  90) { x =  90};
	    	  if (x < -90) { x = -90};

	    	  // To make computation easier we shift the range of 
	    	  // x and y to [0,180]
	    	  x += 90;
	    	  y += 90;

	    	  // 10 is half the size of the ball
	    	  // It center the positioning point to the center of the ball
	    	  ball.style.top  = (maxX*x/180 - 10) + "px";
	    	  ball.style.left = (maxY*y/180 - 10) + "px";
	    	}

	    	window.addEventListener('deviceorientation', handleOrientation);
	    }
    }
});

$(document).bind('mousemove', function(e){
	if(!detectmob()) {
	    $('#enter').css({
	        left: -0.1 * e.pageX + window.innerWidth/2 - 55,
	        top: -0.1 * e.pageY + window.innerHeight/2 + 300
	    });
	    $('#niven').css({
	        left: -0.02 * e.pageX + window.innerWidth/2 - 330,
	        top: -0.02 * e.pageY + window.innerHeight/2 - 350
	    });
	    $('#francis').css({
	        left: -0.04 * e.pageX + window.innerWidth/2 - 470,
	        top: -0.04 * e.pageY + window.innerHeight/2 - 100
	    });
	}
});

document.onkeydown = function() {
	if (event.keyCode == 13 || event.keyCode == 32) {
		fadeout_main();
	}
}

function fadeout_main() {
	document.getElementById("intro").style.animation = "fadeout 1s";
	setTimeout(loadMain, 900);
}

function loadMain() {
	var toChange = document.getElementById("intro");
	toChange.className = "container";
	document.getElementById("intro").style.animation = "fadein_transparent 1s";
	show_home();
}

function show_home() {
	var toChange = document.getElementById("intro");
	if(detectmob()) {
		toChange.innerHTML = '<div class="header_mobile" onclick="show_home()"><b>HOME</b></div> | ';
		toChange.innerHTML += '<div class="header_mobile" onclick="show_media()">MEDIA</div> | ';
		toChange.innerHTML += '<div class="header_mobile" onclick="show_about()">ABOUT</div>';
	}
	else if(!detectmob()) {
		toChange.innerHTML = '<div class="header" onclick="show_home()"><b>HOME</b></div> | ';
		toChange.innerHTML += '<div class="header" onclick="show_media()">MEDIA</div> | ';
		toChange.innerHTML += '<div class="header" onclick="show_about()">ABOUT</div>';
	}
	toChange.innerHTML += '<br><hr>';
	toChange.innerHTML += '<div id="inner" class="inner_text"></div>';
	
	document.getElementById("intro").style.opacity = 0.8;
	document.title = "Nivsite Home";
	
	var toChange = document.getElementById("inner");
	jQuery("#inner").load('WebContent/home.html');
}

function show_media() {
	var toChange = document.getElementById("intro");
	if(detectmob()) {
	toChange.innerHTML = '<div class="header_mobile" onclick="show_home()">HOME</div> | ';
	toChange.innerHTML += '<div class="header_mobile" onclick="show_media()"><b>MEDIA</b></div> | ';
	toChange.innerHTML += '<div class="header_mobile" onclick="show_about()">ABOUT</div>';
	}
	else if(!detectmob()) {
		toChange.innerHTML = '<div class="header" onclick="show_home()">HOME</div> | ';
		toChange.innerHTML += '<div class="header" onclick="show_media()"><b>MEDIA</b></div> | ';
		toChange.innerHTML += '<div class="header" onclick="show_about()">ABOUT</div>';
	}
	toChange.innerHTML += '<br><hr>';
	toChange.innerHTML += '<div id="inner" class="inner_text"></div>';
	
	document.getElementById("intro").style.opacity = 1;
	document.title = "Nivsite Media";
	
	var toChange = document.getElementById("inner");
	jQuery("#inner").load('WebContent/media.html');
}

function show_about() {
	var toChange = document.getElementById("intro");
	if(detectmob()) {
		toChange.innerHTML = '<div class="header_mobile" onclick="show_home()">HOME</div> | ';
		toChange.innerHTML += '<div class="header_mobile" onclick="show_media()">MEDIA</div> | ';
		toChange.innerHTML += '<div class="header_mobile" onclick="show_about()"><b>ABOUT</b></div>';
	}
	else if(!detectmob()) {
		toChange.innerHTML = '<div class="header" onclick="show_home()">HOME</div> | ';
		toChange.innerHTML += '<div class="header" onclick="show_media()">MEDIA</div> | ';
		toChange.innerHTML += '<div class="header" onclick="show_about()"><b>ABOUT</b></div>';
	
	}
	toChange.innerHTML += '<br><hr>';
	toChange.innerHTML += '<div id="inner" class="inner_text"></div>';
	
	document.getElementById("intro").style.opacity = 0.8;
	document.title = "Nivsite About";
	
	var toChange = document.getElementById("inner");
	jQuery("#inner").load('WebContent/about.html');
}

function detectmob() { 
	 if( navigator.userAgent.match(/Android/i)
	 || navigator.userAgent.match(/webOS/i)
	 || navigator.userAgent.match(/iPhone/i)
	 || navigator.userAgent.match(/iPad/i)
	 || navigator.userAgent.match(/iPod/i)
	 || navigator.userAgent.match(/BlackBerry/i)
	 || navigator.userAgent.match(/Windows Phone/i)
	 ){
	    return true;
	  }
	 else {
	    return false;
	  }
}

</script>

</body>
</html>
